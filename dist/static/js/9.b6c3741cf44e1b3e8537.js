webpackJsonp([9,20],{"0DgY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("N1La"),a=n("bUp0"),o=n("dVeB"),s={components:{addMenu:i.default},data:function(){return{filterText:"",isVisible:!1,menu:{},title:"菜单添加",menuList:[],selectMenuList:[]}},methods:{closeDialog:function(){this.isVisible=!1,this.getMenuList()},edit:function(e){this.isVisible=!0,this.menu=e,this.title="菜单修改"},add:function(e){this.menu=e?{id:"",projectId:1,parentId:e.id,type:2}:{id:"",projectId:1,type:1},this.isVisible=!0,this.title="菜单添加"},deleteMenu:function(e){var t=this;this.$confirm("删除菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.a)(e.id).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.getMenuList()}).catch(function(e){408===e.status?t.$router.push("/408"):Object(o.Message)({message:e,type:"error",duration:3e3})})}).catch(function(){})},getMenuList:function(){var e=this;Object(a.c)().then(function(t){e.menuList=t.dataObject.menuTrees,e.selectMenuList=e.menuList}).catch(function(t){408===t.status?e.$router.push("/408"):Object(o.Message)({message:t,type:"error",duration:3e3})})},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getMenuList()},handleCurrentChange:function(e){this.listQuery.pageIndex=e,this.getMenuList()},selectNode:function(e){this.selectMenuList=[],this.selectMenuList.push(e),e.children.length&&this.childrenNode(e.children)},childrenNode:function(e){var t=this;e.forEach(function(e){t.selectMenuList.push(e),e.children.length&&t.childrenNode(e.children)})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)}},mounted:function(){this.getMenuList()},watch:{filterText:function(e){this.$refs.tree.filter(e)}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard-editor-container"},[n("el-container",[n("el-aside",{attrs:{width:"400px"}},[n("el-input",{staticClass:"search_key",attrs:{placeholder:"搜索关键字","suffix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),n("el-tree",{ref:"tree",attrs:{data:e.menuList,"node-key":"id","filter-node-method":e.filterNode,"expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node",on:{click:function(t){e.selectNode(a)}}},[n("span",[e._v(e._s(i.label))]),e._v(" "),n("span",[1===a.type?n("el-button",{attrs:{icon:"el-icon-plus",type:"text"},on:{click:function(t){e.add(a)}}}):e._e(),e._v(" "),n("el-button",{attrs:{icon:"el-icon-edit",type:"text"},on:{click:function(t){e.edit(a)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(t){e.deleteMenu(a)}}})],1)])}}])}),e._v(" "),n("div",{staticClass:"add_menu",on:{click:e.add}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 添加菜单\n      ")])],1),e._v(" "),n("el-main",{staticClass:"data_body"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.selectMenuList,stripe:""}},[n("el-table-column",{attrs:{prop:"name",label:"菜单名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"notes",label:"描述",align:"center",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"菜单类型",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.type?n("span",[n("el-tag",{attrs:{type:"danger"}},[e._v("菜单权限")])],1):n("span",[n("el-tag",{attrs:{type:"success"}},[e._v("操作权限")])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"path",label:"菜单路径",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createDate",label:"创建时间",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-date"}),e._v(" "),n("span",[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(n){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(n){e.deleteMenu(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:e.title,visible:e.isVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.isVisible=t}}},[n("add-Menu",{attrs:{menu:e.menu},on:{close:function(t){e.closeDialog()}}})],1)],1)],1)],1)},staticRenderFns:[]};var l=n("/Xao")(s,r,!1,function(e){n("FufZ")},"data-v-a063d9d2",null);t.default=l.exports},"2vfw":function(e,t,n){(e.exports=n("BkJT")(!1)).push([e.i,"\n.dashboard-editor-container[data-v-a063d9d2] {\n  padding: 20px;\n  width: 100%;\n}\n.dashboard-editor-container .search_key[data-v-a063d9d2] {\n    border: 0;\n    font-size: 14px;\n    width: 380px;\n    outline: 0;\n    overflow: hidden;\n    background: 0 0;\n    margin-left: 10px;\n    margin-bottom: 20px;\n    padding: 5px 0px;\n}\n.dashboard-editor-container .search_key[data-v-a063d9d2]:focus {\n      border-bottom: 1px solid #3e3e3e;\n}\n.dashboard-editor-container .search_icon[data-v-a063d9d2] {\n    cursor: pointer;\n}\n.dashboard-editor-container .add_menu[data-v-a063d9d2] {\n    border: 1px dashed #888;\n    border-radius: 3px;\n    height: 30px;\n    line-height: 30px;\n    text-align: center;\n    cursor: pointer;\n    margin-top: 10px;\n}\n.dashboard-editor-container .add_menu[data-v-a063d9d2]:hover {\n      border: 1px dashed #65a6df;\n}\n.dashboard-editor-container .data_body[data-v-a063d9d2] {\n    padding-top: 5px;\n}\n.custom-tree-node[data-v-a063d9d2] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  font-size: 14px;\n  padding-right: 8px;\n  height: 26px;\n  line-height: 26px;\n}\n",""])},"6kya":function(e,t,n){var i=n("gjmS");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("8bSs")("3dfe7162",i,!0)},FufZ:function(e,t,n){var i=n("2vfw");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("8bSs")("0e3db743",i,!0)},N1La:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("4YfN"),a=n.n(i),o=n("9rMa"),s=n("dVeB"),r=n("bUp0"),l=n("Odk1"),c={props:{menu:{type:Object,default:{}}},data:function(){return{menuForm:{id:"",name:"",notes:"",parentId:-1,path:"",type:1,sort:1,projectId:1,enabled:1,userId:0,position:"left",iconName:""},menuList:[],menuListTemp:[],projectList:[],rules:{name:[{required:!0,message:"请输入英文名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20个字符",trigger:"blur"}],notes:[{required:!0,message:"请输入显示标题",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20个字符",trigger:"blur"}],path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}]}}},computed:a()({},Object(o.b)(["userId"])),created:function(){this.menuForm=this.menu},watch:{menu:function(){this.menuForm=this.menu}},methods:{changeType:function(e){1===e?(this.menuListTemp=[],this.menuForm.parentId=-1):this.menuListTemp=this.menuList},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.menuForm.parentId||(t.menuForm.parentId=-1),t.menuForm.id?(t.menuForm.userId=t.userId,Object(r.e)(t.menuForm).then(function(e){Object(s.Message)({message:"菜单修改成功~",type:"success",duration:3e3}),t.$emit("close")}).catch(function(e){t.$emit("close"),408===e.status?t.$router.push("/408"):Object(s.Message)({message:e,type:"error",duration:3e3})})):(t.menuForm.enabled=1,t.menuForm.sort=3,t.menuForm.userId=t.userId,Object(r.d)(t.menuForm).then(function(e){Object(s.Message)({message:"菜单添加成功~",type:"success",duration:3e3}),t.$emit("close")}).catch(function(e){t.$emit("close"),408===e.status?t.$router.push("/408"):Object(s.Message)({message:e,type:"error",duration:3e3})})))})},closeDialog:function(e){this.$emit("close")},getMenuList:function(){var e=this;Object(r.b)().then(function(t){e.menuList=t.dataObject.menuList,2===e.menuForm.type&&(e.menuListTemp=e.menuList)}).catch(function(t){e.$router.push("/408")})},getProjectList:function(){var e=this;Object(l.d)().then(function(t){e.projectList=t.dataObject.projectsList}).catch(function(t){e.$router.push("/408")})}},mounted:function(){this.getMenuList(),this.getProjectList()}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard-editor-container"},[n("el-form",{ref:"menuForm",staticClass:"demo-ruleForm",attrs:{model:e.menuForm,rules:e.rules,"label-position":"left","label-width":"80px"}},[n("el-form-item",{attrs:{label:"显示标题",prop:"notes"}},[n("el-input",{model:{value:e.menuForm.notes,callback:function(t){e.$set(e.menuForm,"notes",t)},expression:"menuForm.notes"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"英文名称",prop:"name"}},[n("el-input",{model:{value:e.menuForm.name,callback:function(t){e.$set(e.menuForm,"name",t)},expression:"menuForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"路径",prop:"path"}},[n("el-input",{model:{value:e.menuForm.path,callback:function(t){e.$set(e.menuForm,"path",t)},expression:"menuForm.path"}})],1),e._v(" "),-1===e.menuForm.parentId?n("el-form-item",{attrs:{label:"图标",prop:"iconName"}},[n("el-input",{model:{value:e.menuForm.iconName,callback:function(t){e.$set(e.menuForm,"iconName",t)},expression:"menuForm.iconName"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[n("el-radio-group",{on:{change:e.changeType},model:{value:e.menuForm.type,callback:function(t){e.$set(e.menuForm,"type",t)},expression:"menuForm.type"}},[n("el-radio",{attrs:{label:1,disabled:""!==e.menuForm.id}},[e._v("菜单权限")]),e._v(" "),n("el-radio",{attrs:{label:2,disabled:""!==e.menuForm.id}},[e._v("操作权限")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"上级菜单"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择上级菜单",disabled:""!==e.menuForm.id},model:{value:e.menuForm.parentId,callback:function(t){e.$set(e.menuForm,"parentId",t)},expression:"menuForm.parentId"}},[n("el-option",{attrs:{label:"顶级菜单",value:-1}}),e._v(" "),e._l(e.menuListTemp,function(e){return n("el-option",{key:e.id,attrs:{label:e.notes,value:e.id}})})],2)],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("menuForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var d=n("/Xao")(c,u,!1,function(e){n("6kya")},"data-v-d81a91c6",null);t.default=d.exports},bUp0:function(e,t,n){"use strict";t.d=function(e){return Object(i.a)({url:a.a.GET_SAVE_MENU_URL,method:"post",data:e})},t.e=function(e){return Object(i.a)({url:a.a.GET_UPDATE_MENU_URL,method:"post",data:e})},t.c=function(){return Object(i.a)({url:a.a.GET_MENU_TREE_URL,method:"post"})},t.b=function(){return Object(i.a)({url:a.a.GET_CATALOGUE_MENU_LIST,method:"post"})},t.a=function(e){return Object(i.a)({url:a.a.DELETE_MENU_BY_ID,method:"post",data:{id:e}})};var i=n("vLgD"),a=n("FN8c")},gjmS:function(e,t,n){(e.exports=n("BkJT")(!1)).push([e.i,"\n.dashboard-editor-container[data-v-d81a91c6] {\n  padding: 20px;\n  width: 100%;\n}\n",""])}});