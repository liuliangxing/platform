webpackJsonp([20],{"6kya":function(e,t,n){var r=n("gjmS");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("8bSs")("3dfe7162",r,!0)},N1La:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("4YfN"),o=n.n(r),a=n("9rMa"),s=n("dVeB"),m=n("bUp0"),u=n("Odk1"),i={props:{menu:{type:Object,default:{}}},data:function(){return{menuForm:{id:"",name:"",notes:"",parentId:-1,path:"",type:1,sort:1,projectId:1,enabled:1,userId:0,position:"left",iconName:""},menuList:[],menuListTemp:[],projectList:[],rules:{name:[{required:!0,message:"请输入英文名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20个字符",trigger:"blur"}],notes:[{required:!0,message:"请输入显示标题",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20个字符",trigger:"blur"}],path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}]}}},computed:o()({},Object(a.b)(["userId"])),created:function(){this.menuForm=this.menu},watch:{menu:function(){this.menuForm=this.menu}},methods:{changeType:function(e){1===e?(this.menuListTemp=[],this.menuForm.parentId=-1):this.menuListTemp=this.menuList},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.menuForm.parentId||(t.menuForm.parentId=-1),t.menuForm.id?(t.menuForm.userId=t.userId,Object(m.e)(t.menuForm).then(function(e){Object(s.Message)({message:"菜单修改成功~",type:"success",duration:3e3}),t.$emit("close")}).catch(function(e){t.$emit("close"),408===e.status?t.$router.push("/408"):Object(s.Message)({message:e,type:"error",duration:3e3})})):(t.menuForm.enabled=1,t.menuForm.sort=3,t.menuForm.userId=t.userId,Object(m.d)(t.menuForm).then(function(e){Object(s.Message)({message:"菜单添加成功~",type:"success",duration:3e3}),t.$emit("close")}).catch(function(e){t.$emit("close"),408===e.status?t.$router.push("/408"):Object(s.Message)({message:e,type:"error",duration:3e3})})))})},closeDialog:function(e){this.$emit("close")},getMenuList:function(){var e=this;Object(m.b)().then(function(t){e.menuList=t.dataObject.menuList,2===e.menuForm.type&&(e.menuListTemp=e.menuList)}).catch(function(t){e.$router.push("/408")})},getProjectList:function(){var e=this;Object(u.d)().then(function(t){e.projectList=t.dataObject.projectsList}).catch(function(t){e.$router.push("/408")})}},mounted:function(){this.getMenuList(),this.getProjectList()}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard-editor-container"},[n("el-form",{ref:"menuForm",staticClass:"demo-ruleForm",attrs:{model:e.menuForm,rules:e.rules,"label-position":"left","label-width":"80px"}},[n("el-form-item",{attrs:{label:"显示标题",prop:"notes"}},[n("el-input",{model:{value:e.menuForm.notes,callback:function(t){e.$set(e.menuForm,"notes",t)},expression:"menuForm.notes"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"英文名称",prop:"name"}},[n("el-input",{model:{value:e.menuForm.name,callback:function(t){e.$set(e.menuForm,"name",t)},expression:"menuForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"路径",prop:"path"}},[n("el-input",{model:{value:e.menuForm.path,callback:function(t){e.$set(e.menuForm,"path",t)},expression:"menuForm.path"}})],1),e._v(" "),-1===e.menuForm.parentId?n("el-form-item",{attrs:{label:"图标",prop:"iconName"}},[n("el-input",{model:{value:e.menuForm.iconName,callback:function(t){e.$set(e.menuForm,"iconName",t)},expression:"menuForm.iconName"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[n("el-radio-group",{on:{change:e.changeType},model:{value:e.menuForm.type,callback:function(t){e.$set(e.menuForm,"type",t)},expression:"menuForm.type"}},[n("el-radio",{attrs:{label:1,disabled:""!==e.menuForm.id}},[e._v("菜单权限")]),e._v(" "),n("el-radio",{attrs:{label:2,disabled:""!==e.menuForm.id}},[e._v("操作权限")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"上级菜单"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择上级菜单",disabled:""!==e.menuForm.id},model:{value:e.menuForm.parentId,callback:function(t){e.$set(e.menuForm,"parentId",t)},expression:"menuForm.parentId"}},[n("el-option",{attrs:{label:"顶级菜单",value:-1}}),e._v(" "),e._l(e.menuListTemp,function(e){return n("el-option",{key:e.id,attrs:{label:e.notes,value:e.id}})})],2)],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("menuForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var l=n("/Xao")(i,c,!1,function(e){n("6kya")},"data-v-d81a91c6",null);t.default=l.exports},bUp0:function(e,t,n){"use strict";t.d=function(e){return Object(r.a)({url:o.a.GET_SAVE_MENU_URL,method:"post",data:e})},t.e=function(e){return Object(r.a)({url:o.a.GET_UPDATE_MENU_URL,method:"post",data:e})},t.c=function(){return Object(r.a)({url:o.a.GET_MENU_TREE_URL,method:"post"})},t.b=function(){return Object(r.a)({url:o.a.GET_CATALOGUE_MENU_LIST,method:"post"})},t.a=function(e){return Object(r.a)({url:o.a.DELETE_MENU_BY_ID,method:"post",data:{id:e}})};var r=n("vLgD"),o=n("FN8c")},gjmS:function(e,t,n){(e.exports=n("BkJT")(!1)).push([e.i,"\n.dashboard-editor-container[data-v-d81a91c6] {\n  padding: 20px;\n  width: 100%;\n}\n",""])}});